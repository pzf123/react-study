
<!--
 * @Author: pzf
 * @description: 文件描述
 * @Date: 2021-09-13 18:01:21
 * @LastEditors: pzf
 * @LastEditTime: 2021-09-18 15:02:50
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <title>Hello react</title> 
    <!-- 引入react核心库 -->
	<script type="text/javascript" src="../js/react.development.js"></script>
	<!-- 引入react-dom，用于支撑react操作DOM-->
	<script type="text/javascript" src="../js/react-dom.development.js"></script>
	<!-- 引入babel，用于将jsx转为js -->
	<script type="text/javascript" src="../js/babel.min.js"></script>
</head>
<body>
    <div id="test"></div> 
    <script type="text/babel">   
        class Weatcher extends React.Component {    
            state = {
                isHot: false, 
                isHotMsg: '很热',
                isNoHotMsh: '凉快'
            } 
            render() {  
                return <h1 onClick={this.changeWeatcher}>{this.state.isHot ? this.state.isHotMsg : this.state.isNoHotMsh}</h1>
            }
            /**
             * 箭头函数没有自己的this, 找其外层函数的this，
             * 此时this指向组件的实例对象
             * 自定义方法都要写成赋值语句加箭头函数的形式
            */
            changeWeatcher = () => { 
                const isHot = this.state.isHot  
                this.setState({ 
                    isHot: !isHot
                })
            } 
            // this指向有问题
            // 函数放在实例对象
            // 由于changeWeather作为onClick的回调，不是作为实例调用，是直接调用,
            // 类的方法开启了局部的严格模式，所以this指向的是undefined
            // changeWeatcher = function() { 
            //     const isHot = this.state.isHot  
            //     this.setState({ 
            //         isHot: !isHot
            //     })
            // }
            // 函数放在原型对象中
            // changeWeatcher () { 
            //     const isHot = this.state.isHot  
            //     this.setState({ 
            //         isHot: !isHot
            //     })
            // }
        } 
        // 渲染组件页面
        ReactDOM.render(<Weatcher />, document.getElementById('test')) 
    </script>
    
</body>
</html>